$(document.links).filter(function(){return this.hostname!==window.location.hostname}).attr("target","_blank"),$("input.station").autocomplete({source:function(e,t){$.ajax({url:"/api/CrsSearch",dataType:"json",data:{term:e.term},success:function(e){t(e)},error:function(e,t){console.log(t)}})},select:function(e,t){t.item&&t.item.key&&($("#"+$(this).data("target")).val(t.item.key),$(this).val(t.item.label))},create:function(){$(this).data("ui-autocomplete")._renderItem=function(e,t){var n=this.term,r=new RegExp(n,"gi"),a=t.label.replace(r,"<strong>$&</strong>"),i=t.key.replace(r,"<strong>$&</strong>");return $("<li>").attr("data-value",t.key).append("<a><span style='width:150px;display:inline-block'>"+a+"</span><span class='float-right'>"+i+"</span></a>").appendTo(e)}}}).on("change keyup copy paste cut",function(){this.value||$("#"+$(this).data("target")).val("")}),$("#printedOn").html(function(){var e=function(e){return e<10?"0"+e:e},t=new Date;return"Printed "+e(t.getHours())+":"+e(t.getMinutes())+" on "+e(t.getDate())+"-"+["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()]+"-"+e(t.getYear()%100)}),setInterval(function(){var e=new Date;$("#time").html(formatTime(e))},1e3);var formatTime=function(e){return $hr=$("<span>",{text:prefixZero(e.getHours())}),$min=$("<span>",{text:"."+prefixZero(e.getMinutes())}),$sec=$("<small>",{text:"."+prefixZero(e.getSeconds())}),$hr.append($min).append($sec)},prefixZero=function(e){return e<10?"0"+e:e},highlightFields=function(e){$(".form-group").removeClass("invalid"),$.each(e,function(e,t){var n='[name = "'+e.replace(/(:|\.|\[|\])/g,"\\$1")+'"]',r="#"+e.replace(/(:|\.|\[|\])/g,"\\$1"),a=$(n)||$(r);0<t.Errors.length&&a.closest(".form-group").addClass("invalid")})},highlightErrors=function(e){try{var t=JSON.parse(e.responseText);highlightFields(t),showSummary(t),window.scrollTo(0,0)}catch(e){}},showSummary=function(e){$("#validationSummary").empty().removeClass("d-none");var t=_.flatten(_.map(e,"Errors")),n=[],r=_.reject(t,function(e){return-1<e.ErrorMessage.indexOf("must not be empty")});_.each(r,function(e){n.push(e.ErrorMessage)}),r.length!==t.length&&n.push("The highlighted fields are required to submit this form.");var a=$("#validationSummary").append("<ul></ul>");_.each(n,function(e){$("<li></li>").text(e).appendTo(a)})},redirect=function(e){e.redirect&&(window.location=e.redirect)};